<div class="container mx-auto mb-4 mt-2">
  <div class="flex flex-col justify-center bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 shadow-md rounded-lg p-4 sm:p-6">
    <div class="mx-auto mb-6">
      <h1 class="text-center font-semibold text-xl capitalize md:text-2xl lg:text-4xl">üêæ Edit <%= Current.user.username.split(' ').map(&:capitalize).join(" ") %>'s Profile üêæ</h1>
    </div>

    <%= form_with(model: @user, url: users_path, method: :patch) do |form| %>
      <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
        <div class="flex justify-end md:w-1/3">
          <label for="" class="text-base font-medium text-gray-700 dark:text-gray-100 capitalize required">Userame</label>
        </div>
        <div class="flex flex-col justify-center md:w-5/6">
          <%= form.text_field :username, value: @user.username, class: "shadow-md rounded-md border border-gray-400 focus:outline-softBlue px-3 py-2 w-1/2", :required => true %>
        </div>
      </div>

      <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
        <div class="flex justify-end md:w-1/3">
          <label for="" class="text-base font-medium text-gray-700 dark:text-gray-100 capitalize required">Email</label>
        </div>
        <div class="flex flex-col justify-center md:w-5/6">
          <%= form.email_field :email_address, required: true, value: @user.email_address, class: "shadow-md rounded-md border border-gray-400 focus:outline-blue-400 px-3 py-2 w-1/2 #{'border-red-500' if form.object.errors[:email_address].any?}" %>
          <% form.object.errors.full_messages_for(:email_address).each do |message| %>
            <p class="text-red-500 text-sm italic mt-1">
              <%= message %>
            </p> 
          <% end %>
        </div>
      </div>

      <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
        <div class="flex justify-end md:w-1/3">
          <label for="" class="text-base font-medium text-gray-700 dark:text-gray-100 capitalize required">Password</label>
        </div>
        <div class="flex flex-col justify-center md:w-5/6">
          <%= form.password_field :password, required: true, placeholder: "Enter new password", class: "shadow-md rounded-md border border-gray-400 focus:outline-blue-400 px-3 py-2 w-1/2 #{'border-red-500' if form.object.errors[:password].any?}" %>
          <% form.object.errors.full_messages_for(:password).each do |message| %>
            <p class="text-red-500 text-sm italic mt-1">
              <%= message %>
            </p>
          <% end %>
        </div>
      </div>

      <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
        <div class="flex justify-end md:w-1/3">
          <label for="" class="text-base font-medium text-gray-700 dark:text-gray-100 capitalize required">Password confirmation</label>
        </div>
        <div class="flex flex-col justify-center md:w-5/6">
          <%= form.password_field :password_confirmation, required: true, autocomplete: "current-password", placeholder: "Enter new password again", class: "shadow-md rounded-md border border-gray-400 focus:outline-blue-400 px-3 py-2 w-1/2 #{'border-red-500' if form.object.errors[:password_confirmation].any?}" %>
          <% form.object.errors.full_messages_for(:password_confirmation).each do |message| %>
            <p class="text-red-500 text-sm italic mt-1">
              <%= message %>
            </p>
          <% end %>
        </div>
      </div>

      <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row" data-controller="time-zone">
        <div class="flex justify-end md:w-1/3">
          <%= form.label :timezone, "TimeZone: ", class: "text-base font-medium text-gray-700 dark:text-gray-100 capitalize" %>
        </div>
        <% if @user.timezone.nil? %>
          <div class="flex flex-col justify-center md:w-5/6">
            <%= form.text_field :timezone, data: {"time_zone_target" => "tz"}, class: "shadow-md rounded-md border border-gray-400 bg-gray-100 px-3 py-2 w-1/2 focus:outline-none", readonly: true %>
          </div>
        <% else %>
          <div class="flex flex-col justify-center md:w-5/6">
            <%= form.text_field :timezone, value: @user.timezone, class: "shadow-md rounded-md border border-gray-400 bg-gray-100 px-3 py-2 w-1/2 focus:outline-none", readonly: true %>
            <span class="mt-2 text-sm italic">Timezone is readonly, can not edit</span>
          </div>
        <% end %>
      </div>

      <div class="flex flex-col justify-center items-center space-x-4 mb-4 md:flex-row">
        <div class="mb-4">
          <%= form.submit "Update Profile", class: "text-center rounded-md px-3.5 py-2.5 text-white bg-softBlue hover:bg-white hover:text-softBlue hover:border-2 hover:border-softBlue inline-block font-medium cursor-pointer" %>
        </div>
        <div class="mb-4">
          <%= link_to "Cancel...Go back to #{@user.username.split(" ").map(&:capitalize).join(" ")}'s profile", users_path, class: "text-center rounded-md px-3.5 py-2.5 text-white bg-grayishBlue hover:bg-white hover:text-grayishBlue hover:border-2 hover:border-grayishBlue inline-block font-medium cursor-pointer" %>
        </div>
      </div>
    <% end %>
  </div>
</div>