<div class="container mx-auto w-full shadow-lg rounded-xl mb-4" data-controller="bulk-delete">
  <div class="flex flex-col gap-8 justify-center mt-4 lg:flex-row lg:items-center">
    <div class="hidden lg:block overflow-x-auto">
      <table class="table-auto mb-2 px-2 w-full dark:bg-slate-100">
        <thead>
          <tr class="border-b-4 bg-gray-100 dark:bg-black">
            <th class="capitalize text-sm text-center p-2 dark:text-white">
              <input type="checkbox" data-bulk-delete-target="selectAll" data-action="bulk-delete#toggleAll">
            </th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.number') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.date') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.time') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.hungry') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.come_back_to_eat') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.food_type') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.brand') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.description') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.amount') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.left_amount') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.total_ate_amount') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.result') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.favorite_score') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.weight') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.note') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.edit') %></th>
            <th class="capitalize text-sm text-center p-2 dark:text-white"><%= t('trackers.tracker.delete') %></th>
          </tr>
        </thead>
        <tbody>
          <% @trackers.select(&:persisted?).each_with_index do |record, idx| %>
            <tr id="<%= dom_id(record) %>" class="<%= tracker_row_class(record) %>">
              <td class="capitalize text-sky-700 text-sm text-center p-2">
                <%= check_box_tag "tracker_ids[]", record.id, false, class: "tracker-checkbox", "data-bulk-delete-target": "checkbox", "data-action": "bulk-delete#updateSelectAll" %>
              </td>
              <td class="capitalize text-sky-700 text-sm text-center p-2 font-semibold p-2"><%= idx+1 %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.date.strftime("%Y-%m-%d") %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.feed_time.strftime("%H:%M") %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.hungry.present? ? t("trackers.hungry_options.#{record.hungry}") : "" %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.come_back_to_eat %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= t("trackers.food_types.#{record.food_type.downcase}") %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.brand %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.description %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.amount %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.left_amount %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.total_ate_amount %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.result %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.favorite_score %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.weight %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2"><%= record.note %></td>
              <td class="capitalize text-sky-700 text-sm text-center p-2">
                <%= link_to edit_pet_tracker_path(@pet, record, page: params[:page]), class: "inline-block transition-transform text-emerald-400 hover:text-emerald-600 hover:scale-110" do %>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />
                    <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" />
                  </svg>
                <% end %>
              </td>
              <td class="capitalize text-sky-700 test-sm text-center p-2">
                <%= link_to(pet_tracker_path(@pet, record, page: params[:page]), data: { turbo_method: :delete, turbo_confirm: t('trackers.tracker.confirm') }, class: "inline-block transition-transform text-red-400 hover:text-red-600 hover:scale-110") do %>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                  </svg>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- Transposed Table for Small Screens -->
    <div class="lg:hidden overflow-x-auto">
      <table class="table-auto mb-2">
        <tbody>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap">
              <input type="checkbox" data-bulk-delete-target="selectAll" data-action="bulk-delete#toggleAll">
            </th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center font-semibold p-2">
                <%= check_box_tag "tracker_ids[]", record.id, false, class: "tracker-checkbox", "data-bulk-delete-target": "checkbox", "data-action": "bulk-delete#updateSelectAll" %>
              </td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.number') %></th>
            <% @trackers.select(&:persisted?).each_with_index do |record, idx| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center font-semibold p-2"><%= idx+1 %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.date') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.date.strftime("%Y-%m-%d") %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.time') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.feed_time.strftime("%H:%M") %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.hungry') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.hungry.present? ? t("trackers.hungry_options.#{record.hungry}") : "" %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.come_back_to_eat') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.come_back_to_eat %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.food_type') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= t("trackers.food_types.#{record.food_type.downcase}") %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.brand') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.brand %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.description') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.description %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.amount') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.amount %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.left_amount') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.left_amount %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.total_ate_amount') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.total_ate_amount %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.result') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.result %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.favorite_score') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.favorite_score %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.weight') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.weight %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.note') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2"><%= record.note %></td>
            <% end %>
          </tr>
          <tr class="border-b bg-gray-100">
            <th class="capitalize text-sm text-left p-2 border-r-4 dark:bg-black whitespace-nowrap"><%= t('trackers.tracker.edit') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2">
                <%= link_to edit_pet_tracker_path(@pet, record, page: params[:page]), class: "inline-block transition-transform text-emerald-400 hover:text-emerald-600 hover:scale-110" do %>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />
                    <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" />
                  </svg>
                <% end %>
              </td>
            <% end %>
          </tr>
          <tr class="border-b">
            <th class="capitalize text-sm text-left p-2 bg-gray-100 border-r-4 whitespace-nowrap"><%= t('trackers.tracker.delete') %></th>
            <% @trackers.select(&:persisted?).each do |record| %>
              <td class="<%= tracker_row_class(record) %> capitalize text-sky-700 text-sm text-center p-2">
                <%= link_to(pet_tracker_path(@pet, record, page: params[:page]), data: { turbo_method: :delete, turbo_confirm: t('trackers.tracker.confirm') }, class: "inline-block transition-transform text-red-400 hover:text-red-600 hover:scale-110") do %>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                  </svg>
                <% end %>
              </td>
            <% end %>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>