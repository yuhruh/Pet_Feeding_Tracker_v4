<%= form_with(model: [@pet, tracker], id: "tracker-form", class: "contents",
  data: {
    tracker_form_favorite_food_url_value: favorite_food_pet_trackers_url(@pet, locale: I18n.locale, format: :json),
    tracker_form_tracker_url_value: pet_tracker_url(@pet, ":id", locale: I18n.locale, format: :json),
    tracker_form_new_dry_food_url_value: new_dry_food_url(locale: I18n.locale)
  }) do |form| %>
  <div class="flex flex-col justify-center mb-4 md:flex-row">
    <%= render 'shared/errors', obj: @tracker %>
  </div>

  
  <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
    <div class="flex justify-center md:justify-end md:w-1/3">
      <%= form.label :date, t('trackers.form.date'), class: "text-sm font-medium text-gray-700 dark:text-gray-100 capitalize required md:text-base" %>
    </div>
    <div class="flex flex-col items-center md:items-start md:w-5/6">
      <%= form.date_field :date, required: true, value: set_current_date, max: set_current_date, class: ["block shadow-sm rounded-md border px-3 py-2 mt-2 w-full dark:text-black", {"border-gray-400 focus:outline-blue-600": tracker.errors[:date].none?, "border-red-400 focus:outline-red-600": tracker.errors[:date].any?}] %>
    </div>
  </div>

  <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
    <div class="flex justify-center md:justify-end md:w-1/3">
      <%= form.label :feed_time, t('trackers.form.feed_time'), class: "text-sm font-medium text-gray-700 dark:text-gray-100 capitalize required md:text-base" %>
    </div>
    <div class="flex flex-col items-center md:items-start md:w-5/6">
      <%= form.time_field :feed_time, required: true, value: set_current_time, class: ["block shadow-sm rounded-md border px-3 py-2 mt-2 w-full dark:text-black", {"border-gray-400 focus:outline-blue-600": tracker.errors[:feed_time].none?, "border-red-400 focus:outline-red-600": tracker.errors[:feed_time].any?}] %>
    </div>
  </div>

  <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
    <div class="flex justify-center md:justify-end md:w-1/3">
      <%= form.label :food_type, t('trackers.form.food_type'), class: "text-sm font-medium text-gray-700 dark:text-gray-100 capitalize required md:text-base" %>
    </div>
    <div class="flex flex-col items-center md:items-start md:w-5/6">   
      <%= form.select :food_type, Tracker.food_types.keys.map { |ft| [t("trackers.food_types.#{ft}"), ft.to_s] }, { prompt: t('trackers.form.prompt') }, required: true, class: ["block shadow-sm rounded-md border px-3 py-2 mt-2 w-full dark:text-black", {"border-gray-400 focus:outline-blue-600": tracker.errors[:food_type].none?, "border-red-400 focus:outline-red-600": tracker.errors[:food_type].any?}], data: { action: "change->tracker-form#toggleDryFoodOptions", tracker_form_target: "foodType" } %>
    </div>
  </div>

  <div id="dry-food-options" data-tracker-form-target="dryFoodOptions" class="hidden flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
    <div class="flex justify-center md:justify-end md:w-1/3">
      <%= form.label :dry_food_id, t('trackers.form.dry_food_list'), class: "text-sm font-medium text-gray-700 dark:text-gray-100 capitalize md:text-base" %>
    </div>
    <div class="flex flex-col items-center md:items-start md:w-5/6">
      <%= form.collection_select :dry_food_id, Current.user.dry_foods, :id, :brand_with_description, { prompt: t('trackers.form.select_dry_food') }, class: "block shadow-sm rounded-md border px-3 py-2 mt-2 w-full dark:text-black border-gray-400 focus:outline-blue-600", data: { action: "change->tracker-form#fillDryFoodFields", tracker_form_target: "dryFoodSelect" } %>
    </div>
  </div>

  <div id="wet-food-options" data-tracker-form-target="wetFoodOptions" class="hidden flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
    <div class="flex justify-center md:justify-end md:w-1/3">
      <%= form.label :wet_food_list, t('trackers.form.wet_food_list'), class: "text-sm font-medium text-gray-700 dark:text-gray-100 capitalize md:text-base" %>
    </div>
    <div class="flex flex-col items-center md:items-start md:w-5/6">
      <%= form.select :wet_food_list, [], { prompt: t('trackers.form.select_favorite_or_enter_manually') }, class: "block shadow-sm rounded-md border px-3 py-2 mt-2 w-full dark:text-black border-gray-400 focus:outline-blue-600 ", data: { action: "change->tracker-form#fillWetFoodFields", tracker_form_target: "wetFoodSelect" } %>
    </div>
  </div>

  <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
    <div class="flex justify-center md:justify-end md:w-1/3">
      <%= form.label :brand, t('trackers.form.brand'), class: "text-sm font-medium text-gray-700 dark:text-gray-100 capitalize required md:text-base" %>
    </div>
    <div class="flex flex-col items-center md:items-start md:w-5/6">
      <%= form.text_field :brand, required: true, class: ["block shadow-sm rounded-md border px-3 py-2 mt-2 w-full dark:text-black", {"border-gray-400 focus:outline-blue-600": tracker.errors[:brand].none?, "border-red-400 focus:outline-red-600": tracker.errors[:brand].any?}], data: { tracker_form_target: "brand" } %>
    </div>
  </div>

  <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
    <div class="flex justify-center md:justify-end md:w-1/3">
      <%= form.label :description, t('trackers.form.description'), class: "text-sm font-medium text-gray-700 dark:text-gray-100 capitalize required md:text-base" %>
    </div>
    <div class="flex flex-col items-center md:items-start md:w-5/6">
      <%= form.text_field :description, required: true, class: ["block shadow-sm rounded-md border px-3 py-2 mt-2 w-full dark:text-black", {"border-gray-400 focus:outline-blue-600": tracker.errors[:description].none?, "border-red-400 focus:outline-red-600": tracker.errors[:description].any?}], data: { tracker_form_target: "description" } %>
    </div>
  </div>

  <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
    <div class="flex justify-center md:justify-end md:w-1/3">
      <%= form.label :hungry, t('trackers.form.hungry'), class: "text-sm font-medium text-gray-700 dark:text-gray-100 capitalize required md:text-base" %>
    </div>
    <div class="flex flex-col items-center md:items-start md:w-5/6">
      <%= form.select :hungry, Tracker.hungries.keys.map { |key| [t("trackers.hungry_options.#{key}"), key] }, { prompt: t('trackers.form.hungry_prompt', petname: @pet.petname.capitalize) }, required: true, class: ["block shadow-sm rounded-md border px-3 py-2 mt-2 w-full dark:text-black", {"border-gray-400 focus:outline-blue-600": tracker.errors[:hungry].none?, "border-red-400 focus:outline-red-600": tracker.errors[:hungry].any?}] %>
    </div>
  </div>

  <div class="flex flex-col justify-center space-x-3 items-center mb-4 md:flex-row">
    <div class="flex justify-center md:justify-end md:w-1/3">
      <%= form.label :amount, t('trackers.form.amount'), class: "text-sm font-medium text-gray-700 dark:text-gray-100 capitalize required md:text-base" %>
    </div>
    <div class="flex flex-col items-center md:items-start md:w-5/6">
      <%= form.number_field :amount, step: :any, placeholder: t('trackers.form.amount_placeholder'), class: ["block shadow-sm rounded-md border px-3 py-2 mt-2 w-full dark:text-black", {"border-gray-400 focus:outline-blue-600": tracker.errors[:amount].none?, "border-red-400 focus:outline-red-600": tracker.errors[:amount].any?}], required: true, min: 0, data: { tracker_form_target: "amount", action: "input->tracker-form#validateAmount" } %>
      <span class="italic text-sm mt-2"><%= t('trackers.form.amount_hint') %><span>
      <div id="amount-alert" data-tracker-form-target="amountAlert" class="text-red-500 italic mt-1 hidden"></div>
    </div>
  </div>
<% end %>
